You're getting this error because cert-manager is installed, but its webhook service (cert-manager-webhook) is not running or not available:

Error: INSTALLATION FAILED:
failed calling webhook "webhook.cert-manager.io":
...
no endpoints available for service "cert-manager-webhook"


---

⚠️ What's Happening

Rancher relies on cert-manager to provision TLS certificates.
If cert-manager is partially installed or unhealthy, Rancher installation will fail.


---

✅ Step-by-Step Fix


---

🔍 Step 1: Check cert-manager pods

kubectl get pods -n cert-manager

Look for these pods:

cert-manager

cert-manager-webhook

cert-manager-cainjector


They should all be in Running status.


---

🔁 Step 2: If pods are missing or crashlooping, reinstall cert-manager

1. First, uninstall the broken one (if needed):



helm uninstall cert-manager -n cert-manager
kubectl delete namespace cert-manager

2. Reinstall cert-manager properly:



kubectl create namespace cert-manager

helm repo add jetstack https://charts.jetstack.io
helm repo update

helm install cert-manager jetstack/cert-manager \
  --namespace cert-manager \
  --create-namespace \
  --set installCRDs=true

Wait 1–2 minutes for the pods to come up.


---

✅ Step 3: Retry Rancher installation

Once cert-manager pods are all Running, install Rancher again:

helm install rancher rancher-latest/rancher \
  --namespace cattle-system \
  --set hostname=rancher.local \
  --set replicas=1


---

Let me know the output of kubectl get pods -n cert-manager, and I’ll guide you further if needed.
